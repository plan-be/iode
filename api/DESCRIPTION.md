<!-- This content was generated by scr4w_amd -->

# Table of Contents



- [IODE: functions by group](#T1)
  - [Function names in IODE](#T2)
  - [Memory allocations in IODE](#T3)
  - [Group "Global Utilities"](#T4)
    - [buf.c](#T5)
    - [pack.c](#T6)
    - [per.c](#T7)
      - [Calculation functions](#T8)
      - [Conversion functions](#T9)
      - [Miscellaneous functions](#T10)
    - [yy.c](#T11)
    - [b\_iodeini.c](#T12)
  - [Group "Pseudo\-virtual functions"](#T13)
    - [k\_super.c](#T14)
      - [List of functions that can be superseeded](#T15)
      - [List of function pointers that can replace the standard implementations](#T16)
  - [Group "IODE Version"](#T17)
    - [k\_vers.c](#T18)
  - [Group "KDB management"](#T19)
    - [k\_kdb.c](#T20)
    - [k\_ws.c](#T21)
    - [k\_wsvar.c](#T22)
  - [Group "Object management"](#T23)
    - [k\_objsv.c](#T24)
    - [k\_objs.c](#T25)
    - [k\_objvers.c](#T26)
    - [k\_pack.c](#T27)
      - [Packing functions](#T28)
      - [Unpacking functions (for TBL and EQ only ?)](#T29)
      - [Allocation functions (SCL & VAR only)](#T30)
    - [k\_val.c](#T31)
    - [k\_eqs.c](#T32)
    - [k\_lst.c](#T33)
    - [k\_tbl.c](#T34)
    - [k\_cmp.c](#T35)
    - [k\_grep.c](#T36)
  - [Group "IODE file management"](#T37)
    - [k\_objfile.c](#T38)
  - [Group "IODE big\- and little\-endian conversion"](#T39)
    - [k\_xdr.c](#T40)
  - [Group "IODE object ascii formats"](#T41)
    - [Filename extensions](#T42)
    - [k\_ccall.c](#T43)
    - [k\_cceqs.c](#T44)
    - [k\_ccidt.c](#T45)
    - [k\_cclst.c](#T46)
    - [k\_ccscl.c](#T47)
    - [k\_cctbl.c](#T48)
    - [k\_ccvar.c](#T49)
  - [Group "LEC language"](#T50)
    - [k\_lec.c](#T51)
  - [Group "Basic functions"](#T52)
    - [b\_args.c](#T53)
    - [b\_errors.c](#T54)
  - [Group "Execution of identities"](#T55)
  - [Group "Model Estimation"](#T56)
  - [Group "Model Simulation"](#T57)
  - [Group "Table Calculation"](#T58)
  - [Group "IODE Printing"](#T59)
  - [Group "IODE object conversions"](#T60)
  - [Group "Iode Reports"](#T61)

# IODE: functions by group {#T1}

- Function names in IODE
- Memory allocations in IODE
- Group "Global Utilities" 
- Group "Pseudo\-virtual functions" 
- Group "IODE Version" 
- Group "KDB management" 
- Group "Object management" 
- Group "IODE file management" 
- Group "IODE big\- and little\-endian conversion"
- Group "Iode object ascii formats" 
- Group "LEC language" 
- Group "Basic functions" 
- Group "Execution of identities" 
- Group "Model Estimation" 
- Group "Model Simulation" 
- Group "Table Calculation" 
- Group "Iode Printing" 
- Group "IODE object conversions" 
- Group "Iode Reports" 

## Function names in IODE {#T2}

As C does not allow "namespacing", we always give prefixes to function names, the prefix giving an indication of the group the function belongs to. For example, P\*() is the group of function for "packing" (aka serializing) IODE objects, PER\*() for manipulating PERIOD, L\_\* () for LEC compilation / execution, etc.

Most filenames follow the same principle: each group of files has a specific prefix which normally gives an indication of the group they belong to.

- k\_\*: core functions (the prefix "k\_" is a legacy of the "Kaa" software)
- b\_\*: building \*B\*locks for IODE reports

## Memory allocations in IODE {#T3}

IODE uses 2 distinct groups of functions for memory allocations.

The **first group** is based on the "standard" memory allocation functions `malloc()` and `free()`.

The main functions in this group are `SW_nalloc()`, `SW_nrealloc()` and `SW_nfree()`. An older group from **scr4** has the same properties: `SCR_malloc()`, `SCR_realloc()` and `SCR_free()`.

The **second group** has been created specifically to avoid memory segmentation when possible. The main idea is to allocate large memory buffers on the heap (called "segments") and to fill them with serialized objects, called "packed" objects, like "packed" equations or variables. Each allocated object is identified by a "handle" and, when it is reclaimed by the program, a trivial indirection translates its handle to the real pointer which is simply a shift from the beginning of its segment.

The main functions in this second group are `SW_init()`, `SW_alloc()`, `SW_realloc()`, `SW_free()`, `SW_getptr()` and `SW_end`.

More information can be found at http://xon.be/scr4/libs1/libs1236.htm.

## Group "Global Utilities" {#T4}

|Filename|Object|
|:---|:---|
|buf.c|shares a large allocated buffer in different parts of the application|
|pack.c|packs (serialize) and unpacks (deserialize) objects.|
|per.c|functions for manipulating PERIOD and SAMPLE in IODE.|
|yy.c|helper functions for reading and writing IODE ascii files.|
|b\_iodeini.c|reading and writing parameters in the iode.ini file|

### buf.c {#T5}

Functions to share and reuse a large allocated buffer in different parts of the application.

|Syntax|Description|
|:---|:---|
|`char *BUF_alloc(int len)`|allocates or extends a global buffer of at least len bytes.|
|`void BUF_free()`|frees the buffer|
|`void BUF_lock()`|reserves the buffer utilisation|
|`void BUF_unlock()`|unlocks the buffer|
|`char *BUF_memcpy(char *ptr, int lg)`|copies the the first lg bytes following address ptr to the buffer BUF\_DATA|
|`char *BUF_strcpy(char *ptr)`|copies a null terminated string to the buffer|
| ||
|`char *BUF_DATA`|NULL or pointer to the allocated buffer|

### pack.c {#T6}

Packing (serialize) and unpacking (deserialize) objects.

|Syntax|Description|
|:---|:---|
|`void *P_create()`|creates (allocated) a new pack object|
|`int P_free(char *ptr)`|frees a pack object|
|`void *P_add(void *vptr1, void *vptr2, int lg)`|appends to the pack pointed to by vptr1 the content pointed to by vptr2 which has a length of lg bytes.|
|`void *P_get_ptr(void *vptr, int i)`|retrieves the pointer to the i'th element of a pack.|
|`OSIZE P_get_len(void *vptr, int i)`|retrieves the length (in bytes) of the i'th element of a pack or the length of the full pack if i < 0.|
|`void *P_alloc_get_ptr(void *ptr, int p)`|allocates space for the p'th element of a pack. Copies the pth element in the allocated space.|
|`int P_nb(char *ptr)`|retrieves the number of elements in the pack pointed to by ptr.|

### per.c {#T7}

Functions for manipulating PERIOD and SAMPLE in IODE.

#### Calculation functions {#T8}

|Syntax|Description|
|:---|:---|
|`int PER_diff_per(PERIOD *p1, PERIOD *p2)`|calculates the number of sub periods between two periods.|
|`PERIOD *PER_addper(PERIOD *period, int shift)`|adds (sub\-)periods to period.|
|`int PER_common_smpl(SAMPLE* smp1, SAMPLE* smp2, SAMPLE* res)`|calculates the intersection between 2 SAMPLEs.|

#### Conversion functions {#T9}

|Syntax|Description|
|:---|:---|
|`char *PER_pertoa(per, text)`|creates a text representation of a PERIOD.|
|`PERIOD *PER_atoper(char *text)`|translates a text in a PERIOD.|
|`char *PER_smpltoa(SAMPLE* smpl, char* text)`|writes a SAMPLE in a string.|
|`SAMPLE *PER_atosmpl(char* a1, char* a2)`|creates a SAMPLE based on two strings containing PERIODs.|
|`SAMPLE *PER_pertosmpl(PERIOD* p1, PERIOD* p2)`|returns a new allocated SAMPLE build on two given PERIOD.|

#### Miscellaneous functions {#T10}

|Syntax|Description|
|:---|:---|
|`int PER_nb(int ch)`|gives the nbr of periods in one year for the periodicity ch|
|`int PER_nbper(PERIOD* period)`|retrieves the number of periods in one year in a period|
|`IODE_REAL PER_per2real(PERIOD* from, int i)`|adds a number of sub\-periods to a PERIOD and returns a numerical representation of the result (used mainly for tables and graphs formatting).|

### yy.c {#T11}

Helper functions for reading and writing IODE ascii files.

|Syntax|Description|
|:---|:---|
|`IODE_REAL K_read_real(YYFILE *yy)`|reads a token on the YY stream and interprets the token as a IODE\_REAL (double) if possible.|
|`long K_read_long(YYFILE* yy)`|reads the next token on the YY stream and returns a long.|
|`char* K_read_str(YYFILE* yy)`|reads the next token on the YY stream. If it is a string, returns an allocated copy of the string.|
|`PERIOD *K_read_per(YYFILE* yy)`|reads the next tokens on the YY stream and tries to interpret them as a PERIOD definition (\{long\}\{char\}\{long\}).|
|`SAMPLE *K_read_smpl(YYFILE* yy)`|reads the next tokens on the YY stream and tries to interpret them as a SAMPLE.|
|`int K_read_align(YYFILE* yy)`|reads the next token on the YY stream: LEFT, RIGHT or CENTER.|
|                                          ||
|`void K_stracpy(char** to, char* from)`|allocates and copies a null terminated string.|
|`int K_wrdef(FILE* fd, YYKEYS* table, int def)`|searches the position of a integer in a table of YYKEYS and writes the corresponding token onto fd.|
|`int K_compare(YYKEYS* yy1, YYKEYS* yy2)`|helper function passed as parameter to qsort to sort a table of YYKEYS.|
|`char *K_wrap(char *in, int lg)`|wraps a string (by inserting \\n) to limit each line to lg characters.|

### b\_iodeini.c {#T12}

Functions to read and write parameters in iode.ini.

|Syntax|Description|
|:---|:---|
|`void B_IodeIniFile()`|Retrieves the path to the iode.ini file|
|`int B_IniReadText(char* section, char* parm, char* res, int maxlen, char* dft)`|Reads a text parameter in the current iode.ini file.|
|`int B_IniReadChar(char* section, char* parm, char dft)`|Reads a character parameter in the current iode.ini file.|
|`int B_IniReadNum(char* section, char* parm, int dft)`|Reads a integer parameter in the current iode.ini file.|
|`int B_IniReadYN(char* section, char* parm, int dft)`|Reads a Y/N parameter in the current iode.ini file.|
|`int B_IniWriteText(char* section, char* parm, char* val)`|Saves a text parameter in the current iode.ini file|
|`int B_IniWriteChar(char* section, char* parm, char val)`|Saves a char parameter in the current iode.ini file|
|`int B_IniWriteNum(char* section, char* parm, int val)`|Saves a integer parameter in the current iode.ini file|
|`int B_IniWriteYN(char* section, char* parm, int val)`|Saves a boolean parameter in the current iode.ini file|

## Group "Pseudo\-virtual functions" {#T13}

Some IODE functions may differ according to the context. For example, in the context of a console app, error messages will be printed in the console. In the DOS\-Win32 context, error messages are displayed in the status bar, in the Qt context in a different way...

For each of these functions, a standard implementation (= virtual function) is provided in `iodeapi.lib`, generally using the stdio functions like `printf`. These functions are grouped in k\_super.c.

At the same time, an optional "super function" pointer may point to an alternative function. If that pointer is not null, the alternative function replaces (superseeds) the original implementation (= virtual function). In that way, each context has possibly its own implementation without interfering with the others.

### k\_super.c {#T14}

#### List of functions that can be superseeded {#T15}

Functions used in any context of IODE (GUI or not\-GUI).

|Syntax|Description|
|:---|:---|
|`void kerror(int level, char* fmt, ...)`|Displays an error message and optionally exits the program.|
|`void kpause()`|Displays the message "Press ENTER to continue" and waits for the user to press ENTER.|
|`void kwarning(char* fmt, ...)`|Displays a message and optionally asks the user to press ENTER before continuing.|
|`void kmsg(char* fmt, ...)`|Displays a message.|
|`int kconfirm(char *fmt,...)`|Displays a message and optionally asks confirmation before continuing.|
|`int kmsgbox(unsigned char *str, unsigned char *v, unsigned char **buts)`|Displays a message box with optional buttons.|
|`void krecordkey(int key)`|Records a key in the keyboard buffer.|
|`int Wprintf(char* fmt, ...)`|Displays a message.|
|`int SCR_panic()`|Exits the program (normally on a "memory full" event).|

Functions used only in a GUI context.

|Syntax|Description|
|:---|:---|
|`void ksettitle()`|Set the window title (GUI only).|
|`int ktermvkey(int vkey)`|Defines the interval to wait between two checks on the keyboard buffer length (GUI only).|
|`int khitkey()`|Checks whether the keyboard buffer is not empty (GUI only).|
|`int kgetkey()`|Reads the next character in the keyboard buffer (GUI only).|
|`void kbeep()`|Plays a sound (GUI only).|
|`SAMPLE *kasksmpl()`|Asks the user to give a SAMPLE (GUI only).|
|`int kexecsystem()`|Calls the fonction system().|
|`int kshellexec()`|Call the Win32 function ShellExecuteEx().|

#### List of function pointers that can replace the standard implementations {#T16}

|Syntax|
|:---|
|`void (*kerror_super)(int level, char*msg);`|
|`void (*kpause_super)();`|
|`int kpause_continue = 0;`|
|`void (*kwarning_super)(char* msg);`|
|`void (*kmsg_super)(char* msg);`|
|`int (*kwprintf_super)(char* msg);`|
|`void (*kpanic_super)(void);`|
|`int (*kconfirm_super)(char* msg);`|
|`int (*kmsgbox_super)(unsigned char *str, unsigned char *v, unsigned char **buts);`|
|`int kmsgbox_continue = 0;`|
|`void (*krecordkey_super)(int ch);`|
|`void (*ksettitle_super)(void);`|
|`int (*ktermvkey_super)(int vkey);`|
|`int (*khitkey_super)();`|
|`int (*kgetkey_super)();`|
|`void (*kbeep_super)(void);`|
|`SAMPLE *(*kasksmpl_super)(void);`|
|\`cint kexecsystem\_super(char\*);|
|\`cint kshellexec\_super(char\*);|

## Group "IODE Version" {#T17}

### k\_vers.c {#T18}

Functions to retrieve the current IODE version.

|Syntax|Description|
|:---|:---|
|`char *K_LastVersion()`|returns in an allocated string the current version of IODE.|
|`char *K_CurrentVersion()`|returns in an allocated string the IODE version of the current executable.|

## Group "KDB management" {#T19}

### k\_kdb.c {#T20}

Function to manage KDB, i.e. IODE object groups.

|Syntax|Description|
|:---|:---|
|`KDB *K_init_kdb(int ,char *)`|allocates and initialises a KDB struct|
|`void K_set_kdb_name(KDB *kdb, U_ch *filename);`|changes the filename in a KDB|
|`KDB *K_create(int type, int mode)`|allocates and initialises a KDB object.|
|`int K_free_kdb(KDB* kdb)`|frees a KDB but leaves its contents untouched.|
|`int K_free(KDB* kdb)`|frees a KDB and its contents.|
|`int K_clear(KDB* kdb)`|deletes all objects in a KDB, reset the SAMPLE and replaces the filename by "ws".|
|`KDB *K_refer(KDB* kdb, int nb, char* names[])`|creates a new kdb containing the references to the objects of the list names.|
|`KDB *K_quick_refer(KDB *kdb, char *names[])`|same as K\_refer() but more efficient for large databases.|
|`int K_merge(KDB* kdb1, KDB* kdb2, int replace)`|merges two databases : kdb1 <\- kdb1 \+ kdb2.|
|`int K_merge_del(KDB* kdb1, KDB* kdb2, int replace)`|merges two databases : kdb1 <\- kdb1 \+ kdb2 then deletes kdb2.|

### k\_ws.c {#T21}

Variables and functions for initializing and cleaning up the "in memory" workspaces.

|Syntax|Description|
|:---|:---|
|`KDB *K_WS[7]`|Table with pointers to the 7 KDB in memory, 1 per object type (CEILSTV)|
|`void K_init_ws(int ws)`|Initialises the "in mem" KDB structures and optionaly loads the ws.\* files|
|`void K_end_ws(int ws)`|Deletes the current workspaces defined in K\_WS\[\] and their content after having optionaly saved their content in ws.\* files.|
|`int K_load_RWS(int ref, char *filename)`|Load a VAR file for use in GSAMPLE (print tables and graphs)|

### k\_wsvar.c {#T22}

Functions acting on workspaces of variables.

|Syntax|Description|
|:---|:---|
|`int KV_sample(KDB *kdb, SAMPLE *nsmpl)`|Changes the SAMPLE of a KDB of variables.|
|`int KV_merge(KDB *kdb1, KDB* kdb2, int replace)`|Merges two KDB of variables: kdb1 <\- kdb1 \+ kdb2.|
|`void KV_merge_del(KDB *kdb1, KDB *kdb2, int replace)`|Merges 2 KDB of variables, then deletes the second one.|
|`int KV_add(char* varname)`|Adds a new variable in KV\_WS. Fills it with L\_NAN.|
|`double KV_get(KDB *kdb, int pos, int t, int mode)`|Gets VAR\[t\] where VAR is the series in position pos in kdb.|
|`void KV_set(KDB *kdb, int pos, int t, int mode, IODE_REAL new)`|Sets VAR\[t\], where VAR is the series in position pos in kdb.|
|`int KV_extrapolate(KDB *dbv, int method, SAMPLE *smpl, char **vars)`|Extrapolates variables on a selected SAMPLE according to one of the available methods.|
|`KDB *KV_aggregate(KDB *dbv, int method, char *pattern, char *filename)`|Creates a new KDB with variables created by aggregation based on variable names.\_|
|`void KV_init_values_1(IODE_REAL* val, int t, int method)`|Extrapolates 1 value val\[t\] based on val\[t\], val\[t\-1\] and a selected method.|
|`double KV_get_at_t(char*varname, int t)`|Retrieves the value of varname\[t\]|
|`double KV_get_at_per(char*varname, PERIOD* per)`|Retrieves the value of varname\[per\]|
|`double KV_get_at_aper(char*varname, char* aper)`|Retrieves the value of varname\[aper\]|
|`int KV_set_at_t(char*varname, int t, double val)`|Replaces the value of varname\[t\] by val.|
|`int KV_set_at_per(char*varname, PERIOD* per, double val)`|Replaces the value of varname\[per\] by val.|
|`int KV_set_at_aper(char*varname, char* aper, double val)`|Replaces the value of varname\[aper\] by val.|
|`int KV_per_pos(PERIOD* per2)`|Retrieves the position of a PERIOD in the current KV\_WS sample.|
|`int KV_aper_pos(char* aper2)`|Retrieves the position of a period in text format in the current KV\_WS sample.|

## Group "Object management" {#T23}

- k\_objsv.c: function to create an IODE object of any type.
- k\_objs.c: functions to manipulate IODE objects.
- k\_objvers.c: functions to detect IODE object file version and to convert an object to the current IODE version.\_
- k\_pack.c: functions for "packing" and "unpacking" IODE objects.
- k\_val.c: functions to retrieve object data based on their position or name in the kdb.
- k\_eqs.c: functions to manipulate equation expressions and objects.
- k\_lst.c: functions to manipulate and create lists.
- k\_tbl.c: functions to manage TBL objects.
- k\_cmp.c: function to compare two IODE objects.
- k\_grep.c: functions to search strings in KDB objects.

### k\_objsv.c {#T24}

Function to create an IODE object and to record it in a KDB.

|Syntax|Description|
|:---|:---|
|`int K_add(KDB* kdb, char* name, char* a1, char* a2, char* a3, char* a4, char* a5, char* a6, char* a7, char* a8, char* a9)`|adds an object to a KDB. The number of arguments depends on object type.|

How to create IODE objects using K\_add():

|Object type|Syntax|
|:---|:---|
|Comments|K\_add(KDB\* kdb, char\* name, CMT cmt)|
|Equations|K\_add(KDB\* kdb, char\* name, EQ\* eq, char\* endo) \[where endo = name\]|
|Identities|K\_add(KDB\* kdb, char\* name, char\* lec)|
|Lists|K\_add(KDB\* kdb, char\* name, char\* list)|
|Scalars|K\_add(KDB\* kdb, char\* name, SCL\* scalar)|
|Tables|K\_add(KDB\* kdb, char\* name, TBL \*tbl)|
|Variables|K\_add(KDB\* kdb, char\* name, IODE\_REAL\* var, int nb\_obs) \[nb\_obs = kdb SAMPLE size\]|

Note: the name of an equation MUST be the name of its endogenous variable.

### k\_objs.c {#T25}

Functions to manipulate IODE objects.

|Syntax|Description|
|:---|:---|
|`int K_key(char* name, int mode):`|Checks the validity of an object name and modify its "case" according to the value of mode.|
|`int K_dup(KDB* kdb1, char* name1, KDB* kdb2, char* name2):`|Duplicates an IODE object. Copies name1 of kdb1 to name2 in kdb2.|
|`int K_ren(KDB* kdb, char* name1, char* name2):`|Renames the object name1 in kdb into name2.|
|`int K_add_entry(KDB* kdb, char* name):`|Adds the entry name in kdb and returns its position in the kdb.|
|`int K_find(KDB* kdb, char* name):`|Searches the position of an object name in a KDB.|
|`int K_del_entry(KDB* kdb, int pos):`|Deletes an entry in a KDB \_\_without\_\_ deleting the referenced object.|
|`int K_del(KDB* kdb, int pos):`|Deletes an object (and its data) from a KDB.|
|`int K_del_by_name(KDB* kdb, char* name):`|Deletes an object identified by its name from a KDB.|
|`int K_upd_eqs(char* name, char* lec, char* cmt, int method, SAMPLE* smpl, char* instr, char* blk, float* tests, int date)`|Updates equation field(s). Creates the equation if it doesn't exist.|
|`int K_upd_tbl(char* name, char* arg)`|Creates a basic table with an optional TITLE and optional variable names and/or lec formulas separated by semi\-colons.|

### k\_objvers.c {#T26}

Functions to detect IODE object file version and to convert an object to the current IODE version.\_

|Syntax|Description|
|:---|:---|
|`int K_calcvers(char* label):`|returns the current object version (0\-2) from an IODE file header.|
|`void K_setvers(KDB* kdb, int i, int vers)`|converts an IODE object from IODE objects version 1 or 2 to the current version (0).|

### k\_pack.c {#T27}

Functions for "packing" and "unpacking" IODE objects.

#### Packing functions {#T28}

|Syntax|Description|
|:---|:---|
|`int K_cpack(char **pack, char *a1)`|Packs an IODE CMT object|
|`int K_epack(char **pack, char *a1, char *a2)`|Packs an IODE EQ object|
|`int K_ipack(char **pack, char *a1)`|Packs an IODE IDT object|
|`int K_lpack(char** pack, char* a1)`|Packs an IODE LST object|
|`int K_spack(char **pack, char *a1)`|Packs an IODE SCL object|
|`int K_tpack(char** pack, char* a1)`|Packs an IODE TBL object|
|`int K_vpack(char **pack, IODE_REAL *a1, int *a2)`|Packs an IODE VAR object.|
|`int K_opack(char** pack, char* a1, int* a2)`|Reserved for future new objects|

#### Unpacking functions (for TBL and EQ only ?) {#T29}

|Syntax|Description|
|:---|:---|
|`TBL* K_tunpack(char *pack)`|Creates a TBL struct from a packed TBL|
|`EQ* K_eunpack(char *pack)`|Creates an EQ struct from a packed EQ|
|`IDT* K_iunpack(char *pack)`|Creates an IDT struct from a packed IDT|

s

#### Allocation functions (SCL & VAR only) {#T30}

|Syntax|Description|
|:---|:---|
|`int KS_alloc_scl()`|Allocates space for a new SCL (0.9, 1.0, NaN) in the the "swap area". Returns the "swap" handle.|
|`int KV_alloc_var(int nb)`|Allocates space for a new VAR of length nb in the swap area, initialises it to L\_NAN and returns the "swap" handle.|

### k\_val.c {#T31}

Basic functions to retrieve object data based on their position or name in the kdb. If the object is packed (EQ, TBL...) the position (n) of the element in the pack must be given.

List of functions

|Syntax|Meaning|
|:---|:---|
|`char *K_oval(KDB* kdb, int pos, int n)`| kdb\[pos\]\[n\]|
|`char* K_optr(KDB *kdb, char* name, int n)`| kdb\[name\]\[n\]|
|`char *K_oval0(KDB* kdb, int pos)`| kdb\[pos\]\[0\]|
|`char* K_optr0(KDB *kdb, char* name)`| kdb\[name\]\[0\]|
|`char *K_oval1(KDB* kdb, int pos)`| kdb\[pos\]\[1\]|
|`char* K_optr1(KDB *kdb, char* name)`| kdb\[name\]\[1\]|
|`IODE_REAL *K_vval(KDB* kdb, int pos, int t)`| kdb\[pos\]\[t\]|
|`IODE_REAL *K_vptr(KDB* kdb, char* name, int t)`| kdb\[name\]\[t\]|
|`EQ* K_eptr(KDB* kdb, char* name)`| kdb\[name\]|
|`TBL* K_tptr(KDB* kdb, char* name)`| kdb\[name\]|
|**Equation tests**||
|`double K_etest(KDB* kdb, char*name, int test_nb)`|Retrieves a statistical test stored the equation whose endo is name.|
|`double K_e_stdev (KDB* kdb, char*name)`|Returns stdev calculated during the last estimation of equation name|
|`double K_e_meany (KDB* kdb, char*name)`|Returns meany calculated during the last estimation of equation name|
|`double K_e_ssres (KDB* kdb, char*name)`|Returns ssres calculated during the last estimation of equation name|
|`double K_e_stderr(KDB* kdb, char*name)`|Returns stderr calculated during the last estimation of equation name|
|`double K_e_fstat (KDB* kdb, char*name)`|Returns fstat calculated during the last estimation of equation name|
|`double K_e_r2 (KDB* kdb, char*name)`|Returns r2 calculated during the last estimation of equation name|
|`double K_e_r2adj (KDB* kdb, char*name)`|Returns r2adj calculated during the last estimation of equation name|
|`double K_e_dw (KDB* kdb, char*name)`|Returns dw calculated during the last estimation of equation name|
|`double K_e_loglik(KDB* kdb, char*name)`|Returns loglik calculated during the last estimation of equation name|
|**Scalar data**||
|`double K_s_get_info(KDB* kdb, char*name, int info_nb)`|Retrieves a SCL info|
|`double K_s_get_value (KDB* kdb, char*name)`|Retrieves a SCL value|
|`double K_s_get_relax (KDB* kdb, char*name)`|Retrieves a SCL relax|
|`double K_s_get_stderr(KDB* kdb, char*name)`|Retrieves a SCL stderr|
|`double K_s_get_ttest (KDB* kdb, char*name)`|Retrieves a SCL ttest|
|`double K_s_set_info(KDB* kdb, char*name, int info_nb, double val)`|Sets a SCL info|
|`double K_s_set_value (KDB* kdb, char*name)`|Sets a SCL value|
|`double K_s_set_relax (KDB* kdb, char*name)`|Sets a SCL relax|
|`double K_s_set_stderr(KDB* kdb, char*name)`|Sets a SCL stderr|

### k\_eqs.c {#T32}

Functions to manipulate equation expressions and objects.

|`void E_free(EQ* eq)`|Frees an EQ struct and all its elements|
|:---|:---|
|`int E_split_eq(char* lec, char** lhs, char** rhs)`|Extracts the left and right sides of a lec equation|
|`int E_dynadj(int method, char* lec, char* c1, char* c2, char** adjlec)`|Transforms a LEC equation to add dynamic adjustment|
|`E_DynamicAdjustment(int method, char** eqs, char*c1, char*c2)`|Transforms a LEC equation "in place" to add dynamic adjustment|

### k\_lst.c {#T33}

Basic functions to manipulate lists and to extract lists of VARs and SCLs from IODE objects.

|`Syntax`|Description|
|:---|:---|
|`int K_scan(KDB* kdb, char* l_var, char* l_scal)`|Analyses a KDB content and creates 2 lists with all VAR and all SCL found in the kdb objects (limited to IDT, EQ or TBL).|
|`void KE_scan(KDB* dbe, int i, KDB* exo, KDB* scal)`|Analyses object i from a KDB of EQs and extracts all VARs and all SCLs from the CLEC struct.|
|`void KI_scan(KDB* dbi, int i, KDB* exo, KDB* scal)`|Analyses object i from a KDB dbi of IDTs and extracts all VARs and all SCLs from the LEC expression.|
|`void KT_scan(KDB* dbt, int i, KDB* exo, KDB* scal)`|Analyses object i from a KDB of TBLs and extracts all VARs and all SCLs from the LEC expressions found in the TCELLs.|
|`int KL_lst(char* name, char** lst, int chunck)`|Creates a list from a table of strings. The elements in the new list are separated by semi\-colons.|
|`unsigned char **KL_expand(char *str)`|Replaces recursively list names in a string. Returns a table containing all terms in the string after replacement.|

### k\_tbl.c {#T34}

Functions to manage TBL objects.

|`Syntax`|Description|
|:---|:---|
|`TBL *T_create(int dim)`|Creates a new TBL objects.|
|`void T_free(TBL* tbl)`|Frees a TBL object|
|`void T_free_line(TLINE* line, int dim)`|Frees a TLINE struct and all its TCELL.|
|`void T_free_cell(TCELL* cell)`|Frees a TCELL struct.|
|`int T_add_line(TBL* tbl)`|Extents a TBL by adding at least one line.|
|`TCELL *T_create_cell(TBL* tbl, TLINE* line)`|Initialises a TLINE of the type KT\_CELL.|
|`TCELL *T_create_title(TBL* tbl, TLINE* line)`|Initialises a TLINE of the type KT\_TITLE.|
|`char* T_cell_cont(TCELL* cell, int mode)`|Returns the formated contents of a TCELL.|
|`int T_insert_line(TBL* tbl, int nbr, int type, int where)`|Inserts a TLINE in a TBL.|
|`int T_set_lec_cell(TCELL* cell, unsigned char* lec)`|Assigns a LEC expression to a TCELL. Checks the syntax.|
|`void T_set_string_cell(TCELL* cell, unsigned char* txt)`|Assigns a TEXT to a TCELL.|
|`void T_set_cell_attr(TBL* tbl, int i, int j, int attr)`|Assigns justification (KT\_CENTER...) and typographic (KT\_BOLD...) attributes to a TCELL.|
|`int T_default(TBL* tbl, char*titg, char**titls, char**lecs, int mode, int files, int date)`|Fills a TBL with some basic data: a title, line titles and LEC expressions.|
|`void T_auto(TBL* tbl, char* def, char** vars, int mode, int files, int date)`|Fills a TBL with a list of variables and their CMT.|

### k\_cmp.c {#T35}

Function to compare two IODE objects.

|Syntax|Description|
|:---|:---|
|`int K_cmp(char* name, KDB* kdb1, KDB* kdb2)`|Compares IODE objects having the same name in two KDB.|

### k\_grep.c {#T36}

Functions to search strings in KDB objects.

|Syntax|Description|
|:---|:---|
|`char **K_grep(KDB* kdb, char* pattern, int ecase, int names, int forms, int texts, int all)`|Creates a list of all objects in a KDB having a specific pattern in their names or LEC expression, comment...|
|`char *K_expand(int type, char* file, char* pattern, int all)`|Retrieves all object names matching one or more patterns in a workspace or an object file.|
|`int K_aggr(char* pattern, char* ename, char* nname) *`|Transforms a variable name based on an "aggregation" pattern.|

## Group "IODE file management" {#T37}

### k\_objfile.c {#T38}

Functions to manipulate IODE object files.

|Syntax|Description|
|:---|:---|
|`char *K_set_ext(char* res, char* fname, int type)`|deletes left and right spaces in a filename and changes its extension according to the given type.|
|`void K_strip(char* filename)`|deletes left and right spaces in a filename. Keeps the space inside the filename.|
|`KDB *K_load(int ftype, FNAME fname, int no, char** objs)`|loads a IODE object file.|
|`int K_filetype(char* filename, char* descr, int* nobjs, SAMPLE* smpl)`|retrieves infos on an IODE file: type, number of objects, SAMPLE|
|`KDB *K_interpret(int type, char* filename): generalisation of K_load()`|interprets the content of a file, ascii files includes, and try to load ist content into a KDB.|
|`int K_copy(KDB* kdb, int nf, char** files, int no, char** objs, SAMPLE* smpl)`|reads a list of objects from a list of IODE object files and adds them to an existing KDB.|
|`int K_backup(char* filename)`|takes a backup of a file by renaming the file: filename.xxx => filename.xx$.|
|`int K_save(KDB* kdb, FNAME fname)`|saves a KDB in an IODE object file. The extension of fname is replaced by the standard one (.cmt, .eqs...).|
|`int K_save_ws(KDB* kdb)`|saves a KDB in an IODE object file called "ws.<ext>" where <ext> is one of (.cmt, .eqs...).|
|`int K_setname(char* from, char* to)`|replaces KNAMEPTR(kdb) in an IODE object file.|

## Group "IODE big\- and little\-endian conversion" {#T39}

### k\_xdr.c {#T40}

Functions to convert big\-endian data, used by processors like RISC,... into little\-endian format (x86,...) and vice\-versa.

|Syntax|Description|
|:---|:---|
|`void K_xdrPINT(unsigned char* a)`|Converts un short int from l\-e to b\-e and vice\-versa|
|`void K_xdrPLONG(unsigned char* a)`|Converts un long int from l\-e to b\-e and vice\-versa|
|`void K_xdrKDB(KDB* ikdb, KDB** okdb)`|Converts a KDB t from l\-e to b\-e and vice\-versa|
|                                       ||
|`int (*K_xdrobj[])()`|Table of function pointers, one function for each object type, for converting|

## Group "IODE object ascii formats" {#T41}

Functions to load and save files in IODE ascii format and LArray csv format.

### Filename extensions {#T42}

|Type|Binary extension|Ascii extension|
|:---|:---|:---|
|comments|.cmt|.ac|
|equations|.eqs|.ae|
|identities|.idt|.ai|
|lists|.lst|.al|
|scalars|.scl|.as|
|tables|.tbl|.at|
|variables|.var|.av|
|LArray variables||.csv|

### k\_ccall.c {#T43}

Tables of pointers to functions for reading and writing IODE objects in ASCII and CSV formats.

|Syntax|
|:---|
|`KDB *(*K_load_asc[])()`|
|`int (*K_save_asc[])()`|
|`int (*K_save_csv[])()`|

### k\_cceqs.c {#T44}

Loading and saving IODE ascii equation files.

|Syntax|
|:---|
|`KDB *KE_load_asc(char* filename)`|
|`int KE_save_asc(KDB* kdb, char* filename)`|
|`int KE_save_csv(KDB *kdb, char *filename) : not implemented`|

### k\_ccidt.c {#T45}

Loading and saving IODE ascii identity files.

|Syntax|
|:---|
|`KDB *KI_load_asc(char* filename)`|
|`int KI_save_asc(KDB* kdb, char* filename)`|
|`int KI_save_csv(KDB *kdb, char *filename)`|

### k\_cclst.c {#T46}

Loading and saving IODE ascii list files.

|Syntax|
|:---|
|`KDB *KL_load_asc(char* filename)`|
|`int KL_save_asc(KDB* kdb, char* filename)`|
|`int KL_save_csv(KDB *kdb, char *filename)`|

### k\_ccscl.c {#T47}

Loading and saving IODE ascii scalar files.

|Syntax|
|:---|
|`KDB *KS_load_asc(char* filename)`|
|`int KS_save_asc(KDB* kdb, char* filename)`|
|`int KS_save_csv(KDB *kdb, char *filename)`|

### k\_cctbl.c {#T48}

Loading and saving IODE ascii table files.

|Syntax|
|:---|
|`KDB *KT_load_asc(char* filename)`|
|`int KT_save_asc(KDB* kdb, char* filename)`|
|`int KT_save_csv(KDB *kdb, char *filename)`|

### k\_ccvar.c {#T49}

Functions to import and export IODE files to/from ascii and LArray\-csv format.

|Syntax|
|:---|
|`KDB *KV_load_asc(char *filename)`|
|`KV_save_asc(KDB* kdb, char* filename)`|
|`int KV_save_csv(KDB *kdb, char *filename, SAMPLE *smpl, char **varlist)`|

## Group "LEC language" {#T50}

For the LEC implementation, see [lec.md](lec.md).

### k\_lec.c {#T51}

Implemention of the LEC library virtual functions for SCL and VAR references.

|Syntax|Description|
|:---|:---|
|`IODE_REAL *L_getvar(KDB* kdb, int pos)`|Retrieves a pointer to the first element of a VAR.|
|`IODE_REAL L_getscl(KDB* kdb, int pos)`|Retrieves a scalar value.|
|`SAMPLE *L_getsmpl(KDB* kdb)`|Retrieves the sample of a KDB.|
|`int L_findscl(KDB* kdb, char *name)`|Retrieves a scalar position.|
|`int L_findvar(KDB* kdb, char* name)`|Retrieves a variable position.|

## Group "Basic functions" {#T52}

### b\_args.c {#T53}

Basic functions for managing function and report arguments.

|Syntax|Description|
|:---|:---|
|`char **B_ainit_chk(char* arg, ADEF* adef, int nb)`|expands an argument by replacing @filename and $listname by their contents|
|`char **B_vtom_chk(char* arg, int nb)`|splits a string (generally a function argument) into a table of strings.|
|`int B_loop(char *argv[], int (*fn)(), char* client)`|executes the function fn(char\*, char\*) for each string in the table of strings argv.|
|`int B_ainit_loop(char* arg, int (*fn)(), char* client)`|calls B\_ainit\_check() to expand arg, then calls B\_loop() on the resulting table of strings.|
|`int B_get_arg0(char* arg0, char*arg, int lg)`|computes arg0, the first arg ('word') of max lg bytes, in the string arg.|
|`int B_argpos(char* str, int ch)`|returns the position of a char in a string.|

### b\_errors.c {#T54}

Basic functions for managing error messages.

|Syntax|Description|
|:---|:---|
|`char *B_msg(int n)`|Returns a static buffer containing the message n from file iode.msg.|
|`void B_seterror(char* fmt, ...)`|Formats an error message and adds the text of the message to the global table of last errors.|
|`void B_seterrn(int n, ...)`|Formats a message found in iode.msg and adds the result to the list of last errors.|
|`void B_display_last_error()`|Displays the last recorded errors (in B\_ERROR\_MSG) using kmsgbox().|
|`void B_print_last_error()`|Displays or prints the last recorded errors (in B\_ERROR\_MSG) using W\_printf().|
|`void B_clear_last_error()`|Resets the list of last messages (B\_ERROR\_MSG and B\_ERROR\_NB).|

## Group "Execution of identities" {#T55}

See [IDENTITIES.md](identities.md).

## Group "Model Estimation" {#T56}

See [ESTIM.md](ESTIM.md).

## Group "Model Simulation" {#T57}

See [SIMUL.md](simul.md).

## Group "Table Calculation" {#T58}

See [TBL\_CALC.md](tbl_calc.md).

## Group "IODE Printing" {#T59}

See [PRINTING.md](PRINTING.md).

## Group "IODE object conversions" {#T60}

See [CONVERSIONS.md](CONVERSIONS.md).

## Group "Iode Reports" {#T61}

See [REPORTS.md](REPORTS.md).

