<!-- This content was generated by scr4w_amd -->

# Table of Contents



- [IODE: functions by group](#T1)
  - [Function names in IODE](#T2)
  - [Memory allocations in IODE](#T3)
  - [SCR4 library](#T4)
  - [Group "Global Utilities"](#T5)
    - [buf.c](#T6)
    - [pack.c](#T7)
    - [per.c](#T8)
      - [Calculation functions](#T9)
      - [Conversion functions](#T10)
      - [Miscellaneous functions](#T11)
    - [yy.c](#T12)
    - [b\_iodeini.c](#T13)
  - [Group "Pseudo\-virtual functions"](#T14)
    - [k\_super.c](#T15)
      - [List of functions that can be superseeded](#T16)
      - [List of function pointers that can replace the standard implementations](#T17)
  - [Group "IODE Version"](#T18)
    - [k\_vers.c](#T19)
  - [Group "KDB management"](#T20)
    - [k\_kdb.c](#T21)
    - [k\_ws.c](#T22)
    - [k\_wsvar.c](#T23)
  - [Group "Object management"](#T24)
    - [k\_objsv.c](#T25)
    - [k\_objs.c](#T26)
    - [k\_objvers.c](#T27)
    - [k\_pack.c](#T28)
      - [Packing functions](#T29)
      - [Unpacking functions (for Table and EQ only ?)](#T30)
      - [Allocation functions (Scalar & VAR only)](#T31)
    - [k\_val.c](#T32)
    - [k\_eqs.c](#T33)
    - [k\_lst.c](#T34)
    - [k\_tbl.c](#T35)
    - [k\_cmp.c](#T36)
    - [k\_grep.c](#T37)
  - [Group "IODE file management"](#T38)
    - [k\_objfile.c](#T39)
  - [Group "IODE big\- and little\-endian conversion"](#T40)
    - [k\_xdr.c](#T41)
  - [Group "IODE object ascii formats"](#T42)
    - [Filename extensions](#T43)
    - [k\_ccall.c](#T44)
    - [k\_cccmt.c](#T45)
    - [k\_cceqs.c](#T46)
    - [k\_ccidt.c](#T47)
    - [k\_cclst.c](#T48)
    - [k\_ccscl.c](#T49)
    - [k\_cctbl.c](#T50)
    - [k\_ccvar.c](#T51)
  - [Group "LEC language"](#T52)
    - [k\_lec.c](#T53)
  - [Group "Basic functions"](#T54)
    - [b\_args.c](#T55)
    - [b\_errors.c](#T56)
  - [Group "Execution of identities"](#T57)
  - [Group "Model Estimation"](#T58)
  - [Group "Model Simulation"](#T59)
  - [Group "Table Calculation"](#T60)
  - [Group "IODE Printing"](#T61)
  - [Group "IODE object IO"](#T62)
  - [Group "Iode Reports"](#T63)
  - [Group "Iode high\-level API"](#T64)
    - [b\_api.c](#T65)
  - [Group "DDE communcations"](#T66)
    - [b\_dde.c](#T67)

# IODE: functions by group {#T1}

- Function names in IODE
- Memory allocations in IODE
- SCR4 library
- Group "Global Utilities" 
- Group "Pseudo\-virtual functions" 
- Group "IODE Version" 
- Group "KDB management" 
- Group "Object management" 
- Group "IODE file management" 
- Group "IODE big\- and little\-endian conversion"
- Group "Iode object ascii formats" 
- Group "LEC language" 
- Group "Basic functions" 
- Group "Execution of identities" 
- Group "Model Estimation" 
- Group "Model Simulation" 
- Group "Table Calculation" 
- Group "Iode Printing" 
- Group "IODE object IO" 
- Group "Iode Reports" 
- Group "Iode high\-level API" 
- Group "DDE communcations" 

## Function names in IODE {#T2}

As C does not allow "namespacing", we always give prefixes to function names, the prefix giving an indication of the group the function belongs to. For example, P\*() is the group of function for "packing" (aka serializing) IODE objects, PER\*() for manipulating Period, L\_\* () for LEC compilation / execution, etc.

Most filenames follow the same principle: each group of files has a specific prefix which normally gives an indication of the group they belong to.

- k\_\*: core functions (the prefix "k\_" is a legacy of the "Kaa" software)
- b\_\*: building \*B\*locks for IODE reports

## Memory allocations in IODE {#T3}

IODE uses 2 distinct groups of functions for memory allocations.

The **first group** is based on the "standard" memory allocation functions `malloc()` and `free()`.

The main functions in this group are `SW_nalloc()`, `SW_nrealloc()` and `SW_nfree()`. An older group from **scr4** has the same properties: `SCR_malloc()`, `SCR_realloc()` and `SCR_free()`.

The **second group** has been created specifically to avoid memory segmentation when possible. The main idea is to allocate large memory buffers on the heap (called "segments") and to fill them with serialized objects, called "packed" objects, like "packed" equations or variables. Each allocated object is identified by a "handle" and, when it is reclaimed by the program, a trivial indirection translates its handle to the real pointer which is simply a shift from the beginning of its segment.

The main functions in this second group are `SW_init()`, `SW_alloc()`, `SW_realloc()`, `SW_free()`, `SW_getptr()` and `SW_end`.

More information can be found at http://xon.be/scr4/libs1/libs1236.htm.

## SCR4 library {#T4}

Most functions in IODE massively use the SCR4 library functions which extends the standard "libc" libray for numerous topics:

- memory management
- list management
- matrix calculus
- ini file management
- html, rtf, md, csv file generation
- printing management
- odbc interface
- etc

The web page http://www.xon.be/scr4/libs1/libs1.htm contains a list of all available functions.

## Group "Global Utilities" {#T5}

|Filename|Object|
|:---|:---|
|buf.c|shares a large allocated buffer in different parts of the application|
|pack.c|packs (serialize) and unpacks (deserialize) objects.|
|per.c|functions for manipulating Period and Sample in IODE.|
|yy.c|helper functions for reading and writing IODE ascii files.|
|b\_iodeini.c|reading and writing parameters in the iode.ini file|

### buf.c {#T6}

Functions to share and reuse a large allocated buffer in different parts of the application.

|Syntax|Description|
|:---|:---|
|`char *BUF_alloc(int len)`|allocates or extends a global buffer of at least len bytes.|
|`void BUF_free()`|frees the buffer|
|`void BUF_lock()`|reserves the buffer utilisation|
|`void BUF_unlock()`|unlocks the buffer|
|`char *BUF_memcpy(char *ptr, int lg)`|copies the the first lg bytes following address ptr to the buffer BUF\_DATA|
|`char *BUF_strcpy(char *ptr)`|copies a null terminated string to the buffer|
| ||
|`char *BUF_DATA`|NULL or pointer to the allocated buffer|

### pack.c {#T7}

Packing (serialize) and unpacking (deserialize) objects.

|Syntax|Description|
|:---|:---|
|`void *P_create()`|creates (allocated) a new pack object|
|`int P_free(char *ptr)`|frees a pack object|
|`void *P_add(void *vptr1, void *vptr2, int lg)`|appends to the pack pointed to by vptr1 the content pointed to by vptr2 which has a length of lg bytes.|
|`void *P_get_ptr(void *vptr, int i)`|retrieves the pointer to the i'th element of a pack.|
|`OSIZE P_get_len(void *vptr, int i)`|retrieves the length (in bytes) of the i'th element of a pack or the length of the full pack if i < 0.|
|`int P_nb(char *ptr)`|retrieves the number of elements in the pack pointed to by ptr.|

### yy.c {#T12}

Helper functions for reading and writing IODE ascii files.

|Syntax|Description|
|:---|:---|
|`double K_read_real(YYFILE *yy)`|reads a token on the YY stream and interprets the token as a IODE\_REAL (double) if possible.|
|`long K_read_long(YYFILE* yy)`|reads the next token on the YY stream and returns a long.|
|`char* K_read_str(YYFILE* yy)`|reads the next token on the YY stream. If it is a string, returns an allocated copy of the string.|
|`Period *K_read_per(YYFILE* yy)`|reads the next tokens on the YY stream and tries to interpret them as a Period definition (\{long\}\{char\}\{long\}).|
|`Sample *K_read_smpl(YYFILE* yy)`|reads the next tokens on the YY stream and tries to interpret them as a Sample.|
|`int K_read_align(YYFILE* yy)`|reads the next token on the YY stream: LEFT, RIGHT or CENTER.|
|                                          ||
|`void K_stracpy(char** to, char* from)`|allocates and copies a null terminated string.|
|`int K_wrdef(FILE* fd, YYKEYS* table, int def)`|searches the position of a integer in a table of YYKEYS and writes the corresponding token onto fd.|
|`int K_compare(YYKEYS* yy1, YYKEYS* yy2)`|helper function passed as parameter to qsort to sort a table of YYKEYS.|
|`char *K_wrap(char *in, int lg)`|wraps a string (by inserting \\n) to limit each line to lg characters.|

### b\_iodeini.c {#T13}

Functions to read and write parameters in iode.ini.

|Syntax|Description|
|:---|:---|
|`void B_IodeIniFile()`|Retrieves the path to the iode.ini file|
|`int B_IniReadText(char* section, char* parm, char* res, int maxlen, char* dft)`|Reads a text parameter in the current iode.ini file.|
|`int B_IniReadChar(char* section, char* parm, char dft)`|Reads a character parameter in the current iode.ini file.|
|`int B_IniReadNum(char* section, char* parm, int dft)`|Reads a integer parameter in the current iode.ini file.|
|`int B_IniReadYN(char* section, char* parm, int dft)`|Reads a Y/N parameter in the current iode.ini file.|
|`int B_IniWriteText(char* section, char* parm, char* val)`|Saves a text parameter in the current iode.ini file|
|`int B_IniWriteChar(char* section, char* parm, char val)`|Saves a char parameter in the current iode.ini file|
|`int B_IniWriteNum(char* section, char* parm, int val)`|Saves a integer parameter in the current iode.ini file|
|`int B_IniWriteYN(char* section, char* parm, int val)`|Saves a boolean parameter in the current iode.ini file|

## Group "Pseudo\-virtual functions" {#T14}

Some IODE functions may differ according to the context. For example, in the context of a console app, error messages will be printed in the console. In the DOS\-Win32 context, error messages are displayed in the status bar, in the Qt context in a different way...

For each of these functions, a standard implementation (= virtual function) is provided in `iode_c_api.lib`, generally using the stdio functions like `printf`. These functions are grouped in k\_super.c.

At the same time, an optional "super function" pointer may point to an alternative function. If that pointer is not null, the alternative function replaces (superseeds) the original implementation (= virtual function). In that way, each context has possibly its own implementation without interfering with the others.

### k\_super.c {#T15}

#### List of functions that can be superseeded {#T16}

Functions used in any context of IODE (GUI or not\-GUI).

|Syntax|Description|
|:---|:---|
|`void kerror(int level, char* fmt, ...)`|Displays an error message and optionally exits the program.|
|`void kpause()`|Displays the message "Press ENTER to continue" and waits for the user to press ENTER.|
|`void kwarning(char* fmt, ...)`|Displays a message and optionally asks the user to press ENTER before continuing.|
|`void kmsg(char* fmt, ...)`|Displays a message.|
|`void kmsg_toggle(int IsOn)`|Suppresses or restores the message output by replacing kmsg\_super()|
|`int kconfirm(char *fmt,...)`|Displays a message and optionally asks confirmation before continuing.|
|`int kmsgbox(unsigned char *str, unsigned char *v, unsigned char **buts)`|Displays a message box with optional buttons.|
|`void krecordkey(int key)`|Records a key in the keyboard buffer.|
|`int Wprintf(char* fmt, ...)`|Displays a message.|
|`int SCR_panic()`|Exits the program (normally on a "memory full" event).|

Functions used only in a GUI context.

|Syntax|Description|
|:---|:---|
|`void ksettitle()`|Set the window title (GUI only).|
|`int ktermvkey(int vkey)`|Defines the interval to wait between two checks on the keyboard buffer length (GUI only).|
|`int khitkey()`|Checks whether the keyboard buffer is not empty (GUI only).|
|`int kgetkey()`|Reads the next character in the keyboard buffer (GUI only).|
|`void kbeep()`|Plays a sound (GUI only).|
|`Sample *kasksmpl()`|Asks the user to give a Sample (GUI only).|
|`int kexecsystem()`|Calls the fonction system().|
|`int kshellexec()`|Call the Win32 function ShellExecuteEx().|

#### List of function pointers that can replace the standard implementations {#T17}

|Syntax|
|:---|
|`int (*kerror_super)(int level, char*msg);`|
|`void (*kpause_super)();`|
|`int kpause_continue = 0;`|
|`void (*kwarning_super)(char* msg);`|
|`void (*kmsg_super)(char* msg);`|
|`int (*kwprintf_super)(char* msg);`|
|`void (*kpanic_super)(void);`|
|`int (*kconfirm_super)(char* msg);`|
|`int (*kmsgbox_super)(unsigned char *str, unsigned char *v, unsigned char **buts);`|
|`int kmsgbox_continue = 0;`|
|`void (*krecordkey_super)(int ch);`|
|`void (*ksettitle_super)(void);`|
|`int (*ktermvkey_super)(int vkey);`|
|`int (*khitkey_super)();`|
|`int (*kgetkey_super)();`|
|`void (*kbeep_super)(void);`|
|`Sample *(*kasksmpl_super)(void);`|
|\`cint kexecsystem\_super(char\*);|
|\`cint kshellexec\_super(char\*);|

## Group "IODE Version" {#T18}

### k\_vers.c {#T19}

Functions to retrieve the current IODE version.

|Syntax|Description|
|:---|:---|
|`char *K_LastVersion()`|returns in an allocated string the current version of IODE.|
|`char *K_CurrentVersion()`|returns in an allocated string the IODE version of the current executable.|

## Group "KDB management" {#T20}

### k\_kdb.c {#T21}

Function to manage KDB, i.e. IODE object groups.

|Syntax|Description|
|:---|:---|
|`int K_merge(KDB* kdb1, KDB* kdb2, int replace)`|merges two databases : kdb1 <\- kdb1 \+ kdb2.|
|`int K_merge_del(KDB* kdb1, KDB* kdb2, int replace)`|merges two databases : kdb1 <\- kdb1 \+ kdb2 then deletes kdb2.|

### k\_ws.c {#T22}

Variables and functions for initializing and cleaning up the "in memory" workspaces.

|Syntax|Description|
|:---|:---|
|`KDB* get_global_db(const int iode_type)`|returns the global database corresponding to the IODE type i|
|`void K_init_ws(int ws)`|sets the filename of all global databases to I_DEFAULT_FILENAME|
|`void K_end_ws(int ws)`|saves content of all global databases|
|`int K_load_RWS(int ref, char *filename)`|Load a VAR file for use in GSample (print tables and graphs)|

### k\_wsvar.c {#T23}

Functions acting on workspaces of variables.

|Syntax|Description|
|:---|:---|
|`int KV_sample(KDB *kdb, Sample *nsmpl)`|Changes the Sample of a KDB of variables.|
|`int KV_merge(KDB *kdb1, KDB* kdb2, int replace)`|Merges two KDB of variables: kdb1 <\- kdb1 \+ kdb2.|
|`void KV_merge_del(KDB *kdb1, KDB *kdb2, int replace)`|Merges 2 KDB of variables, then deletes the second one.|
|`int KV_add(CKDBVariables* kdb, char* varname)`|Adds a new variable in kdb. Fills it with L\_NAN.|
|`double KV_get(KDB *kdb, int pos, int t, int mode)`|Gets VAR\[t\] where VAR is the series in position pos in kdb.|
|`void KV_set(KDB *kdb, int pos, int t, int mode, double new)`|Sets VAR\[t\], where VAR is the series in position pos in kdb.|
|`int KV_extrapolate(KDB *dbv, int method, Sample *smpl, char* pattern)`|Extrapolates variables on a selected Sample according to one of the available methods.|
|`KDB *KV_aggregate(CKDBVariables*dbv, int method, char *pattern, char *filename)`|Creates a new KDB with variables created by aggregation based on variable names.\_|
|`void KV_init_values_1(double* val, int t, int method)`|Extrapolates 1 value val\[t\] based on val\[t\], val\[t\-1\] and a selected method.|
|`double KV_get_at_t(char*varname, int t)`|Retrieves the value of varname\[t\]|
|`double KV_get_at_per(char*varname, Period* per)`|Retrieves the value of varname\[per\]|
|`double KV_get_at_aper(char*varname, char* aper)`|Retrieves the value of varname\[aper\]|
|`int KV_set_at_t(char*varname, int t, double val)`|Replaces the value of varname\[t\] by val.|
|`int KV_set_at_per(char*varname, Period* per, double val)`|Replaces the value of varname\[per\] by val.|
|`int KV_set_at_aper(char*varname, char* aper, double val)`|Replaces the value of varname\[aper\] by val.|
|`int KV_per_pos(Period* per2)`|Retrieves the position of a Period in the current KV\_WS sample.|
|`int KV_aper_pos(char* aper2)`|Retrieves the position of a period in text format in the current KV\_WS sample.|

## Group "Object management" {#T24}

- k\_objsv.c: function to create an IODE object of any type.
- k\_objs.c: functions to manipulate IODE objects.
- k\_objvers.c: functions to detect IODE object file version and to convert an object to the current IODE version.\_
- k\_pack.c: functions for "packing" and "unpacking" IODE objects.
- k\_val.c: functions to retrieve object data based on their position or name in the kdb.
- k\_eqs.c: functions to manipulate equation expressions and objects.
- k\_lst.c: functions to manipulate and create lists.
- k\_tbl.c: functions to manage Table objects.
- k\_cmp.c: function to compare two IODE objects.
- k\_grep.c: functions to search strings in KDB objects.

### k\_objs.c {#T26}

Functions to manipulate IODE objects.

|Syntax|Description|
|:---|:---|
|`int K_upd_eqs(char* name, char* lec, char* cmt, int method, Sample* smpl, char* instr, char* blk, float* tests, int date)`|Updates equation field(s). Creates the equation if it doesn't exist.|
|`int K_upd_tbl(char* name, char* arg)`|Creates a basic table with an optional TITLE and optional variable names and/or lec formulas separated by semi\-colons.|

### k\_objvers.c {#T27}

Functions to detect IODE object file version and to convert an object to the current IODE version.\_

|Syntax|Description|
|:---|:---|
|`int K_calcvers(char* label):`|returns the current object version (0\-2) from an IODE file header.|
|`void K_setvers(KDB* kdb, int i, int vers)`|converts an IODE object from IODE objects version 1 or 2 to the current version (0).|

### k\_pack.c {#T28}

Functions for "packing" and "unpacking" IODE objects.

#### Packing functions {#T29}

|Syntax|Description|
|:---|:---|
|`int K_cpack(char **pack, char *a1)`|Packs an IODE CMT object|
|`int K_epack(char **pack, char *a1, char *a2)`|Packs an IODE EQ object|
|`int K_ipack(char **pack, char *a1)`|Packs an IODE IDT object|
|`int K_lpack(char** pack, char* a1)`|Packs an IODE LST object|
|`int K_spack(char **pack, char *a1)`|Packs an IODE Scalar object|
|`int K_tpack(char** pack, char* a1)`|Packs an IODE Table object|
|`int K_vpack(char **pack, double *a1, int *a2)`|Packs an IODE VAR object.|
|`int K_opack(char** pack, char* a1, int* a2)`|Reserved for future new objects|

#### Unpacking functions (for Table and EQ only ?) {#T30}

|Syntax|Description|
|:---|:---|
|`Table* K_tunpack(char *pack)`|Creates a Table struct from a packed Table|
|`Equation* K_eunpack(char *pack, char *name)`|Creates an EQ struct from a packed EQ|
|`Identity* K_iunpack(char *pack)`|Creates an IDT struct from a packed IDT|

s

#### Allocation functions (Scalar & VAR only) {#T31}

|Syntax|Description|
|:---|:---|
|`int KS_alloc_scl()`|Allocates space for a new Scalar (0.9, 1.0, NaN) in the the "swap area". Returns the "swap" handle.|
|`int KV_alloc_var(int nb)`|Allocates space for a new VAR of length nb in the swap area, initialises it to L\_NAN and returns the "swap" handle.|

### k\_val.c {#T32}

Basic functions to retrieve object data based on their position or name in the kdb. If the object is packed (EQ, Table...) the position (n) of the element in the pack must be given.

List of functions

|Syntax|Meaning|
|:---|:---|
|`char *K_oval(KDB* kdb, int pos, int n)`| kdb\[pos\]\[n\]|
|`char* K_optr(KDB *kdb, char* name, int n)`| kdb\[name\]\[n\]|
|`char *K_oval0(KDB* kdb, int pos)`| kdb\[pos\]\[0\]|
|`char* K_optr0(KDB *kdb, char* name)`| kdb\[name\]\[0\]|
|`char *K_oval1(KDB* kdb, int pos)`| kdb\[pos\]\[1\]|
|`char* K_optr1(KDB *kdb, char* name)`| kdb\[name\]\[1\]|
|`double *K_vval(KDB* kdb, int pos, int t)`| kdb\[pos\]\[t\]|
|`double *K_vptr(KDB* kdb, char* name, int t)`| kdb\[name\]\[t\]|
|`Equation* K_eptr(KDB* kdb, char* name)`| kdb\[name\]|
|`Table* K_tptr(KDB* kdb, char* name)`| kdb\[name\]|
|**Equation tests**||
|`double K_etest(KDB* kdb, char*name, int test_nb)`|Retrieves a statistical test stored the equation whose endo is name.|
|`double K_e_stdev (KDB* kdb, char*name)`|Returns stdev calculated during the last estimation of equation name|
|`double K_e_meany (KDB* kdb, char*name)`|Returns meany calculated during the last estimation of equation name|
|`double K_e_ssres (KDB* kdb, char*name)`|Returns ssres calculated during the last estimation of equation name|
|`double K_e_stderr(KDB* kdb, char*name)`|Returns stderr calculated during the last estimation of equation name|
|`double K_e_fstat (KDB* kdb, char*name)`|Returns fstat calculated during the last estimation of equation name|
|`double K_e_r2 (KDB* kdb, char*name)`|Returns r2 calculated during the last estimation of equation name|
|`double K_e_r2adj (KDB* kdb, char*name)`|Returns r2adj calculated during the last estimation of equation name|
|`double K_e_dw (KDB* kdb, char*name)`|Returns dw calculated during the last estimation of equation name|
|`double K_e_loglik(KDB* kdb, char*name)`|Returns loglik calculated during the last estimation of equation name|
|**Scalar data**||
|`double K_s_get_info(CKDBScalars* kdb, char*name, int info_nb)`|Retrieves a Scalar info|
|`double K_s_get_value (KDB* kdb, char*name)`|Retrieves a Scalar value|
|`double K_s_get_relax (KDB* kdb, char*name)`|Retrieves a Scalar relax|
|`double K_s_get_stderr(KDB* kdb, char*name)`|Retrieves a Scalar stderr|
|`double K_s_get_ttest (KDB* kdb, char*name)`|Retrieves a Scalar ttest|
|`double K_s_set_info(CKDBScalars* kdb, char*name, int info_nb, double val)`|Sets a Scalar info|
|`double K_s_set_value (KDB* kdb, char*name)`|Sets a Scalar value|
|`double K_s_set_relax (KDB* kdb, char*name)`|Sets a Scalar relax|
|`double K_s_set_stderr(KDB* kdb, char*name)`|Sets a Scalar stderr|

### k\_eqs.c {#T33}

Functions to manipulate equation expressions and objects.

|`void E_free(Equation* eq)`|Frees an EQ struct and all its elements|
|:---|:---|
|`int E_split_eq(char* lec, char** lhs, char** rhs)`|Extracts the left and right sides of a lec equation|
|`int E_dynadj(int method, char* lec, char* c1, char* c2, char** adjlec)`|Transforms a LEC equation to add dynamic adjustment|
|`E_DynamicAdjustment(int method, char** eqs, char*c1, char*c2)`|Transforms a LEC equation "in place" to add dynamic adjustment|

### k\_lst.c {#T34}

Basic functions to manipulate lists and to extract lists of VARs and Scalars from IODE objects.

|`Syntax`|Description|
|:---|:---|
|`int K_scan(KDB* kdb, char* l_var, char* l_scal)`|Analyses a KDB content and creates 2 lists with all VAR and all Scalar found in the kdb objects (limited to IDT, EQ or Table).|
|`void KE_scan(KDB* dbe, int i, KDB* exo, KDB* scal)`|Analyses object i from a KDB of EQs and extracts all VARs and all Scalars from the CLEC struct.|
|`void KI_scan(KDB* dbi, int i, KDB* exo, KDB* scal)`|Analyses object i from a KDB dbi of IDTs and extracts all VARs and all Scalars from the LEC expression.|
|`void KT_scan(KDB* dbt, int i, KDB* exo, KDB* scal)`|Analyses object i from a KDB of Tables and extracts all VARs and all Scalars from the LEC expressions found in the TableCells.|
|`int KL_lst(char* name, char** lst, int chunck)`|Creates a list from a table of strings. The elements in the new list are separated by semi\-colons.|
|`unsigned char **KL_expand(char *str)`|Replaces recursively list names in a string. Returns a table containing all terms in the string after replacement.|

### k\_tbl.c {#T35}

Functions to manage Table objects.

### k\_cmp.c {#T36}

Function to compare two IODE objects.

|Syntax|Description|
|:---|:---|
|`int K_cmp(char* name, KDB* kdb1, KDB* kdb2)`|Compares IODE objects having the same name in two KDB.|

### k\_grep.c {#T37}

Functions to search strings in KDB objects.

|Syntax|Description|
|:---|:---|
|`std::vector<std::string> KDB::grep(std::string& pattern, bool ecase, bool names, bool forms, bool texts, char all)`|Creates a list of all objects in a KDB having a specific pattern in their names or LEC expression, comment...|
|`char *K_expand(int type, char* file, char* pattern, int all)`|Retrieves all object names matching one or more patterns in a workspace or an object file.|
|`int K_aggr(char* pattern, char* ename, char* nname) *`|Transforms a variable name based on an "aggregation" pattern.|

## Group "IODE file management" {#T38}

### k\_objfile.c {#T39}

Functions to manipulate IODE object files.

|Syntax|Description|
|:---|:---|
|`int K_get_ext(char* filename, char* ext, int max_ext_len)`|gets a filename extension.|
|`int K_has_ext(char* filename)`|indicates if a filename contains an extension.|
|`char *K_set_ext(char* res, char* fname, int type)`|deletes left and right spaces in a filename and changes its extension according to the given type.|
|`char *K_set_ext_asc(char* res, char* fname, int type)`|trims a filename then changes its extension to the ascii extension according to the given type.|
|`void K_strip(char* filename)`|deletes left and right spaces in a filename. Keeps the space inside the filename.|
|`int K_filetype(char* filename, char* descr, int* nobjs, Sample* smpl)`|retrieves infos on an IODE file: type, number of objects, Sample|
|`int X_findtype(char* filename)`|Returns the type of content of filename according to its extension|
|`int K_copy(KDB* kdb, int nf, char** files, int no, char** objs, Sample* smpl)`|reads a list of objects from a list of IODE object files and adds them to an existing KDB.|
|\`cint K\_cat(KDB\* ikdb, char\* filename)|concatenates the content of a file to an existing kdb.|
|\`cint K\_set\_backup\_on\_save(int take\_backup)|sets the backup choice before saving a kdb.|
|\`cint K\_get\_backup\_on\_save()|indicates if a backup must be taken before saving a kdb.|
|`int K_backup(char* filename)`|takes a backup of a file by renaming the file: filename.xxx => filename.xx$.|

## Group "IODE big\- and little\-endian conversion" {#T40}

### k\_xdr.c {#T41}

Functions to convert big\-endian data, used by processors like RISC,... into little\-endian format (x86,...) and vice\-versa.

|Syntax|Description|
|:---|:---|
|`void K_xdrPINT(unsigned char* a)`|Converts un short int from l\-e to b\-e and vice\-versa|
|`void K_xdrPLONG(unsigned char* a)`|Converts un long int from l\-e to b\-e and vice\-versa|
|`void template_xdr(KDB* ikdb, KDB** okdb)`|Converts a KDB t from l\-e to b\-e and vice\-versa|
|                                       ||
|`int (*K_xdrobj[])()`|Table of function pointers, one function for each object type, for converting|

## Group "IODE object ascii formats" {#T42}

Functions to load and save files in IODE ascii format and LArray csv format.

### Filename extensions {#T43}

|Type|Binary extension|Ascii extension|
|:---|:---|:---|
|comments|.cmt|.ac|
|equations|.eqs|.ae|
|identities|.idt|.ai|
|lists|.lst|.al|
|scalars|.scl|.as|
|tables|.tbl|.at|
|variables|.var|.av|
|LArray variables||.csv|

### k\_ccall.c {#T44}

Tables of pointers to functions for reading and writing IODE objects in ASCII and CSV formats.

|Syntax|
|:---|
|`KDB *(*K_load_asc[])()`|
|`int (*K_save_asc[])()`|
|`int (*K_save_csv[])()`|

### k\_cccmt.c {#T45}

Loading and saving IODE ascii comment files.

|Syntax|Remark|
|:---|:---|
|`KDB *KC_load_asc(char* filename, int db_global)`||
|`int KC_save_asc(KDB* kdb, char* filename)`||
|`int KC_save_csv(KDB *kdb, char *filename)`|Not implemented|

### k\_cceqs.c {#T46}

Loading and saving IODE ascii equation files.

|Syntax|Remark|
|:---|:---|
|`KDB *KE_load_asc(char* filename, int db_global)`||
|`int KE_save_asc(KDB* kdb, char* filename)`||
|`int KE_save_csv(KDB *kdb, char *filename)`|Not implemented|

### k\_ccidt.c {#T47}

Loading and saving IODE ascii identity files.

|Syntax|Remark|
|:---|:---|
|`KDB *KI_load_asc(char* filename, int db_global)`||
|`int KI_save_asc(KDB* kdb, char* filename)`||
|`int KI_save_csv(KDB *kdb, char *filename)`|Not implemented|

### k\_cclst.c {#T48}

Loading and saving IODE ascii list files.

|Syntax|Remark|
|:---|:---|
|`KDB *KL_load_asc(char* filename, int db_global)`||
|`int KL_save_asc(KDB* kdb, char* filename)`||
|`int KL_save_csv(KDB *kdb, char *filename)`|Not implemented|

### k\_ccscl.c {#T49}

Loading and saving IODE ascii scalar files.

|Syntax|Remark|
|:---|:---|
|`KDB *KS_load_asc(char* filename, int db_global)`||
|`int KS_save_asc(KDB* kdb, char* filename)`||
|`int KS_save_csv(KDB *kdb, char *filename)`|Not implemented|

### k\_cctbl.c {#T50}

Loading and saving IODE ascii table files.

|Syntax|Remark|
|:---|:---|
|`KDB *KT_load_asc(char* filename, int db_global)`||
|`int KT_save_asc(KDB* kdb, char* filename)`||
|`int KT_save_csv(KDB *kdb, char *filename)`|Not implemented|

### k\_ccvar.c {#T51}

Functions to import and export IODE files to/from ascii and LArray\-csv format.

|Syntax|
|:---|
|`KDB *KV_load_asc(char *filename)`|
|`KV_save_asc(KDB* kdb, char* filename)`|
|`int KV_save_csv(KDB *kdb, char *filename, Sample *smpl, char **varlist)`|

## Group "LEC language" {#T52}

For the LEC implementation, see [LEC.md](LEC.md).

### k\_lec.c {#T53}

Implemention of the LEC library virtual functions for Scalar and VAR references.

|Syntax|Description|
|:---|:---|
|`double *L_getvar(CKDBVariables* kdb, int pos)`|Retrieves a pointer to the first element of a VAR.|
|`double L_getscl(CKDBScalars* kdb, int pos)`|Retrieves a scalar value.|
|`Sample *L_getsmpl(KDB* kdb)`|Retrieves the sample of a KDB.|
|`int L_findscl(CKDBScalars* kdb, char *name)`|Retrieves a scalar position.|
|`int L_findvar(CKDBVariables* kdb, char* name)`|Retrieves a variable position.|

## Group "Basic functions" {#T54}

### b\_args.c {#T55}

Basic functions for managing function and report arguments.

|Syntax|Description|
|:---|:---|
|`char **B_ainit_chk(char* arg, ADEF* adef, int nb)`|expands an argument by replacing @filename and $listname by their contents|
|`char **B_vtom_chk(char* arg, int nb)`|splits a string (generally a function argument) into a table of strings.|
|`int B_loop(char *argv[], int (*fn)(), char* client)`|executes the function fn(char\*, char\*) for each string in the table of strings argv.|
|`int B_ainit_loop(char* arg, int (*fn)(), char* client)`|calls B\_ainit\_check() to expand arg, then calls B\_loop() on the resulting table of strings.|
|`int B_get_arg0(char* arg0, char*arg, int lg)`|computes arg0, the first arg ('word') of max lg bytes, in the string arg.|
|`int B_argpos(char* str, int ch)`|returns the position of a char in a string.|

## Group "Execution of identities" {#T57}

See [IDENTITIES.md](identities.md).

## Group "Model Estimation" {#T58}

See [ESTIM.md](ESTIM.md).

## Group "Model Simulation" {#T59}

See [SIMUL.md](simul.md).

## Group "Table Calculation" {#T60}

See [Table\_CALC.md](tbl_calc.md).

## Group "IODE Printing" {#T61}

See [PRINTING.md](PRINTING.md).

## Group "IODE object IO" {#T62}

See [IO.md](IO.md).

## Group "Iode Reports" {#T63}

See [REPORTS.md](REPORTS.md).

## Group "Iode high\-level API" {#T64}

### b\_api.c {#T65}

Set of high\-level functions essentially developed for the creation of the Cython implementation of IODE. Most of these functions are (almost) aliases to other API functions but with a different and more coherent naming convention.

|Syntax|Description|
|:---|:---|
|`int IodeInit()`|Initialise an IODE session.|
|`int IodeEnd()`|Terminate an IODE session.|
|**MESSAGES**||
|` void IodeSuppressMsgs()`|Suppress all messages from the A2M interpretor and from the IODE functions.|
|` void IodeResetMsgs()`|Reset the messages from the A2M interpretor and from the IODE functions.|

## Group "DDE communcations" {#T66}

### b\_dde.c {#T67}

This file contains 2 groups of functions: the implementation of the IODE DDE server, allowing access to IODE functions from inside any program able to interact with a DDE server, like Excel or Word and functions to access the Excel DDE server.

Some of IODE report commands line $ExcelGet are implemented here.

|Syntax|Description|
|:---|:---|
|`int IodeDdeLocale(char *buf)`||
|`int IodeDdeUnLocale(char *buf)`||
|`int IodeDdeType(char *szTopic)`||
|`char *IodeDdeGetWS(char *szItem)`||
|`char *IodeDdeCreateSeries(int objnb, int bt)`||
|`char *IodeDdeCreatePer(int bt)`||
|`char *ToBase26(int num)`||
|`char *IodeDdeXlsCell(char *offset, int i, int j, int lg, int hg)`||
|`char *IodeTblCell(TableCell *cell, COL *cl, int nbdec)`||
|`char *IodeDdeGetReportRC(char *szItem)`||
|`char *IodeDdeGetXObj(char *szItem, int type)`||
|`char *IodeDdeGetItem(char *szTopic, char *szItem)`||
|`int IodeDdeSetWS(char *szItem, char *szBuffer)`||
|`int IodeDdePlay(char *szItem, char *szBuffer)`||
|`int DdeTsfKey(char *key)`||
|`int IodeDdeSetItem(char *szTopic, char *szItem, char *szBuffer)`||
|`char *B_ExcelGetItem(char *arg)`||
|`int B_ExcelSetItem(char *ddeitem, char *ptr, int nc, int nl)`||
|`int B_ExcelDecimal(char *arg, int unused)`||
|`int B_ExcelThousand(char *arg, int unused)`||
|`int B_ExcelCurrency(char *arg, int unused)`||
|`int B_ExcelLang(char *arg, int unused)`||
|`int B_ExcelGet(char *arg, int type)`||
|`int B_ExcelSet(char *arg, int type)`||
|`int B_ExcelExecute(char *arg, int unused)`||
|`int B_ExcelCmd(char *cmd, char *arg)`||
|`int B_DDEGet(char *arg, int unused)`||
|`int B_ExcelWrite(char *ptr, int unused)`||
|`int B_DDEGet(char *arg, int unused)`||
|`char *B_ExcelGetItem(char *arg)`||
|`int B_ExcelGet(char *arg, int type)`||
|`int B_ExcelSet(char *arg, int type)`||
|`int B_ExcelExecute(char *arg, int unused)`||
|`int B_ExcelCmd(char *cmd, char *arg)`||
|`int B_ExcelWrite(char *ptr, int unused)`||
|`int B_ExcelOpen(char *arg, int unused)`||
|`int B_ExcelClose(char *arg, int unused)`||
|`int B_ExcelPrint(char *arg, int unused)`||
|`int B_ExcelSave(char *arg, int unused)`||
|`int B_ExcelSaveAs(char *arg, int unused)`||
|`int B_ExcelNew(char *arg, int unused)`||
|`int IodeFmtVal(char *buf, double val)`||

